<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Login Page</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.9.4/css/bulma.min.css"
        integrity="sha512-HqxHUkJM0SYcbvxUw5P60SzdOTy/QVwA1JJrvaXJv4q7lmbDZCmZaqz01UPOaQveoxfYRv1tHozWGPMcuTBuvQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        body {
            background-color: bisque;
        }

        .is-primary.input,
        .is-primary.textarea {
            border-color: #B57114;
        }

        svg {
            width: 100px;
            height: 100px;
            margin: 20px;
            display: inline-block;
        }

        .is-primary.input:active,
        .is-primary.textarea:active,
        .is-primary.input:focus,
        .is-primary.textarea:focus {
            box-shadow: 0 0 0 0.125em rgba(181, 113, 20, .25)
        }

        .button.is-primary {
            background-color: #B57114;
            color: #fff;
            border: none;
            border-radius: 4px;
            padding: 8px 12px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .button.is-primary:hover {
            background-color: #962B09;
        }
    </style>
</head>

<body>
    <section class="hero is-fullheight">
        <div class="hero-body">
            <div class="container">
                <div class="columns is-vcentered">

                    <div class="column is-one-third">
                        <h1 class="title">Gender-ous Names: A Punny Look at How Names Define Identity</h1>
                        <small>Hey there, don't be shy, just give us a name and we'll give you a gender. No need to feel
                            binary about it, we've got all the genders covered. Let's just hope you don't get a
                            gender-bender name!</small>
                            <br/>
                            <br/>
                        <form>
                            <div class="field">
                                <label class="label">Name</label>
                                <div class="control">
                                    <input class="input is-primary" type="text" id="name-input"
                                        placeholder="Enter your name">
                                </div>
                            </div>
                            <div class="field">
                                <div class="control">
                                    <button class="button is-primary is-fullwidth" id="submit-btn">Submit</button>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="column is-two-third">
                        <div id="loader" class="is-hidden has-text-centered">
                            <svg version="1.1" id="L9" xmlns="http://www.w3.org/2000/svg"
                                xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100"
                                enable-background="new 0 0 0 0" xml:space="preserve">
                                <path fill="#b57114"
                                    d="M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50">
                                    <animateTransform attributeName="transform" attributeType="XML" type="rotate"
                                        dur="1s" from="0 50 50" to="360 50 50" repeatCount="indefinite" />
                                </path>
                            </svg>
                        </div>
                        <div>
                            <div class="gender has-text-centered is-hidden" id="gender-M">
                                <?xml version="1.0" ?><svg fill="none" height="24" viewBox="0 0 24 24" width="24"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path clip-rule="evenodd"
                                        d="M12.1888 7L12.1909 5L19.1909 5.00746L19.1834 12.0075L17.1834 12.0053L17.1873 8.41678L14.143 11.4611C15.4612 13.4063 15.2587 16.0743 13.5355 17.7975C11.5829 19.7501 8.41709 19.7501 6.46447 17.7975C4.51184 15.8449 4.51184 12.6791 6.46447 10.7264C8.16216 9.02873 10.777 8.80709 12.7141 10.0615L15.7718 7.00382L12.1888 7ZM7.87868 12.1406C9.05025 10.9691 10.9497 10.9691 12.1213 12.1406C13.2929 13.3122 13.2929 15.2117 12.1213 16.3833C10.9497 17.5549 9.05025 17.5549 7.87868 16.3833C6.70711 15.2117 6.70711 13.3122 7.87868 12.1406Z"
                                        fill="#706513" fill-rule="evenodd" />
                                </svg>
                                <p class="has-text-centered">It's looking like <span class="name">__name__</span> is mostly assigned to male individuals at birth.</p>
                            </div>
                            <div class="gender has-text-centered is-hidden" id="gender-F">
                                <?xml version="1.0" ?><svg fill="none" height="24" viewBox="0 0 24 24" width="24"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path clip-rule="evenodd"
                                        d="M12 3C9.23858 3 7 5.23858 7 8C7 10.419 8.71776 12.4367 11 12.9V15H8V17H11V21H13V17H16V15H13V12.9C15.2822 12.4367 17 10.419 17 8C17 5.23858 14.7614 3 12 3ZM9 8C9 9.65685 10.3431 11 12 11C13.6569 11 15 9.65685 15 8C15 6.34315 13.6569 5 12 5C10.3431 5 9 6.34315 9 8Z"
                                        fill="#08403E" fill-rule="evenodd" />
                                </svg>
                                <p class="has-text-centered">It's looking like <span class="name">__name__</span> is mostly assigned to female individuals at birth.</p>
                            </div>
                            <div class="gender has-text-centered is-hidden columns" id="gender-unknown">
                                <div class="column is-two-third">
                                    <?xml version="1.0" ?><svg fill="none" height="24" viewBox="0 0 24 24" width="24"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <path
                                            d="M9 11C9.55228 11 10 10.5523 10 10C10 9.44772 9.55228 9 9 9C8.44772 9 8 9.44772 8 10C8 10.5523 8.44772 11 9 11Z"
                                            fill="#520120" />
                                        <path
                                            d="M14 17C14 15.8954 13.1046 15 12 15C10.8954 15 10 15.8954 10 17H8C8 14.7909 9.79086 13 12 13C14.2091 13 16 14.7909 16 17H14Z"
                                            fill="#520120" />
                                        <path
                                            d="M16 10C16 10.5523 15.5523 11 15 11C14.4477 11 14 10.5523 14 10C14 9.44772 14.4477 9 15 9C15.5523 9 16 9.44772 16 10Z"
                                            fill="#520120" />
                                        <path clip-rule="evenodd"
                                            d="M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12ZM20 12C20 16.4183 16.4183 20 12 20C7.58172 20 4 16.4183 4 12C4 7.58172 7.58172 4 12 4C16.4183 4 20 7.58172 20 12Z"
                                            fill="#520120" fill-rule="evenodd" />
                                    </svg>
                                    <p>I'm terrible with names. Unless they're on a nametag, they're just not on my
                                        radar!</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <script type="text/javascript">
        function capitalizeFirstLetter(str) {
            return str.charAt(0).toUpperCase() + str.slice(1);
        }
        function setEventListenerOnSubmitButton() {
            document.getElementById("submit-btn").addEventListener("click", function (event) {
                event.preventDefault();
                const resultDiv = document.getElementById("result");
                const loader = document.getElementById("loader")
                // Get all elements with the class name "gender"
                const genderElements = document.getElementsByClassName('gender');

                // Loop through each element and hide them
                for (let i = 0; i < genderElements.length; i++) {
                    genderElements[i].classList.add('is-hidden');
                }
                if (loader) {
                    loader.classList.remove('is-hidden')
                }
                const name = capitalizeFirstLetter(document.getElementById("name-input").value);
                const data = { "name": name };
                const url = 'https://cheerydonkeys.pythonanywhere.com/predict_gender';

                var xhr = new XMLHttpRequest();
                var json = JSON.stringify(data);

                xhr.open("POST", url, true);
                xhr.setRequestHeader('Content-type', 'application/json; charset=utf-8');
                xhr.onload = function () {
                    if (xhr.status === 200) {
                        var response = JSON.parse(xhr.responseText);
                        if (loader) {
                            loader.classList.add('is-hidden')
                        }

                        const resultDiv = document.getElementById(`gender-${response.gender}`)
                        if (resultDiv) {
                            resultDiv.classList.remove('is-hidden')
                            const nameDiv = resultDiv.querySelector('span')
                            if (nameDiv) {
                                nameDiv.innerText = name
                            }
                        }
                    } else {
                        console.log('Request failed.  Returned status of ' + xhr.status);
                    }
                };
                xhr.send(json);
            })
        }

        setEventListenerOnSubmitButton()
    </script>
</body>

</html>